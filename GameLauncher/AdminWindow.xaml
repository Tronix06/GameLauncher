<Window x:Class="GameLauncher.AdminWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Panel de Administración - BiTronix" 
        Height="700" Width="1100"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="CanResizeWithGrip">

    <Window.Resources>
        <Style TargetType="TextBox">
            <Setter Property="Background" Value="#252525"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="5"/>
            <Setter Property="Height" Value="30"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border Background="{TemplateBinding Background}" CornerRadius="3" BorderBrush="#444" BorderThickness="1">
                            <ScrollViewer x:Name="PART_ContentHost"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="ComboBox">
            <Setter Property="Height" Value="30"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Margin" Value="0,0,0,10"/>
        </Style>

        <Style TargetType="DataGrid">
            <Setter Property="Background" Value="#151515"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="RowBackground" Value="#1A1A1A"/>
            <Setter Property="AlternatingRowBackground" Value="#202020"/>
            <Setter Property="HeadersVisibility" Value="Column"/>
            <Setter Property="GridLinesVisibility" Value="None"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="AutoGenerateColumns" Value="False"/>
            <Setter Property="CanUserAddRows" Value="False"/>
        </Style>

        <Style TargetType="DataGridColumnHeader">
            <Setter Property="Background" Value="#333"/>
            <Setter Property="Foreground" Value="#AAA"/>
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
        </Style>

        <Style TargetType="DataGridCell">
            <Setter Property="Padding" Value="10"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="DataGridCell">
                        <Border Padding="{TemplateBinding Padding}" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                            <ContentPresenter VerticalAlignment="Center" />
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="#0074E0"/>
                    <Setter Property="Foreground" Value="White"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Border Background="#121212" CornerRadius="10" BorderBrush="#0074E0" BorderThickness="1">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="50"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <Grid Grid.Row="0" Background="#1A1A1A" MouseLeftButtonDown="Window_MouseLeftButtonDown">
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="20,0,0,0">
                    <TextBlock Text="🛡️ PANEL DE CONTROL MAESTRO" Foreground="#0074E0" FontWeight="Bold" FontSize="16"/>
                    <TextBlock x:Name="txtAdminUser" Text=" | Sesión iniciada" Foreground="#666666" VerticalAlignment="Center" Margin="10,0,0,0" FontSize="12"/>
                </StackPanel>

                <Button Content="CERRAR PANEL" HorizontalAlignment="Right" Margin="0,0,15,0" Width="100" Height="30" 
                        Background="#FF4444" Foreground="White" FontWeight="Bold" BorderThickness="0" Cursor="Hand"
                        Click="BtnCerrar_Click">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border Background="{TemplateBinding Background}" CornerRadius="5">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
            </Grid>

            <TabControl Grid.Row="1" Background="Transparent" BorderThickness="0" Margin="10">
                <TabControl.Resources>
                    <Style TargetType="TabItem">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="TabItem">
                                    <Border Name="Border" BorderThickness="0" Background="Transparent" Margin="0,0,10,0" Padding="15,10">
                                        <ContentPresenter x:Name="ContentSite" VerticalAlignment="Center" HorizontalAlignment="Center" ContentSource="Header"/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsSelected" Value="True">
                                            <Setter TargetName="Border" Property="Background" Value="#0074E0"/>
                                            <Setter TargetName="Border" Property="CornerRadius" Value="5"/>
                                            <Setter Property="Foreground" Value="White"/>
                                            <Setter Property="FontWeight" Value="Bold"/>
                                        </Trigger>
                                        <Trigger Property="IsSelected" Value="False">
                                            <Setter Property="Foreground" Value="#666666"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </TabControl.Resources>

                <TabItem Header="👥 GESTIÓN DE USUARIOS">
                    <Grid Margin="0,10,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="2*"/>
                            <ColumnDefinition Width="350"/>
                        </Grid.ColumnDefinitions>

                        <DockPanel Grid.Column="0" Margin="0,0,20,0">
                            <Grid DockPanel.Dock="Top" Margin="0,0,0,15">
                                <TextBox x:Name="txtBuscar" Width="300" HorizontalAlignment="Left" TextChanged="TxtBuscar_TextChanged"/>
                                <TextBlock Text="🔍 Buscar usuario por nombre..." IsHitTestVisible="False" Foreground="#555" VerticalAlignment="Center" Margin="10,0,0,0">
                                    <TextBlock.Style>
                                        <Style TargetType="TextBlock">
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding Text, ElementName=txtBuscar}" Value="">
                                                    <Setter Property="Visibility" Value="Visible"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                            <Setter Property="Visibility" Value="Hidden"/>
                                        </Style>
                                    </TextBlock.Style>
                                </TextBlock>
                                <Button Content="↻ REFRESCAR" HorizontalAlignment="Right" Width="100" Height="30" Click="BtnRefrescar_Click" Background="#333" Foreground="White" BorderThickness="0"/>
                            </Grid>

                            <DataGrid x:Name="dgUsuarios" SelectionChanged="DgUsuarios_SelectionChanged">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
                                    <DataGridTextColumn Header="USUARIO" Binding="{Binding Nombre}" Width="*"/>
                                    <DataGridTextColumn Header="EMAIL" Binding="{Binding Email}" Width="1.5*"/>
                                    <DataGridTextColumn Header="ROL" Binding="{Binding Rol}" Width="80"/>
                                    <DataGridTextColumn Header="ESTADO" Binding="{Binding EstadoCuenta}" Width="100"/>
                                </DataGrid.Columns>
                            </DataGrid>
                        </DockPanel>

                        <Border Grid.Column="1" Background="#181818" CornerRadius="8" Padding="20">
                            <ScrollViewer VerticalScrollBarVisibility="Auto">
                                <StackPanel>
                                    <TextBlock Text="DETALLES DE CUENTA" Foreground="#0074E0" FontWeight="Bold" Margin="0,0,0,15"/>

                                    <TextBlock Text="ID de Usuario" Foreground="#555" FontSize="10" FontWeight="Bold"/>
                                    <TextBox x:Name="txtId" IsReadOnly="True" Background="#111" Foreground="#555" Margin="0,0,0,10"/>

                                    <TextBlock Text="Nombre" Foreground="#AAA" FontSize="11" Margin="0,5,0,2"/>
                                    <TextBox x:Name="txtNombre" Margin="0,0,0,10"/>

                                    <TextBlock Text="Email" Foreground="#AAA" FontSize="11" Margin="0,5,0,2"/>
                                    <TextBox x:Name="txtEmail" Margin="0,0,0,10"/>

                                    <TextBlock Text="Contraseña (Dejar vacío para no cambiar)" Foreground="#AAA" FontSize="11" Margin="0,5,0,2"/>
                                    <PasswordBox x:Name="txtPassword" Height="30" Margin="0,0,0,10" Background="#252525" Foreground="White" BorderThickness="0" Padding="5"/>

                                    <Grid Margin="0,10,0,20">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="10"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel Grid.Column="0">
                                            <TextBlock Text="Rol" Foreground="#AAA" FontSize="11" Margin="0,0,0,2"/>
                                            <ComboBox x:Name="cmbRol">
                                                <ComboBoxItem Content="usuario"/>
                                                <ComboBoxItem Content="admin"/>
                                            </ComboBox>
                                        </StackPanel>
                                        <StackPanel Grid.Column="2">
                                            <TextBlock Text="Estado" Foreground="#AAA" FontSize="11" Margin="0,0,0,2"/>
                                            <ComboBox x:Name="cmbEstado" SelectionChanged="CmbEstado_SelectionChanged">
                                                <ComboBoxItem Content="activo"/>
                                                <ComboBoxItem Content="baneado"/>
                                                <ComboBoxItem Content="suspendido"/>
                                            </ComboBox>
                                        </StackPanel>
                                    </Grid>

                                    <Border Background="#221111" CornerRadius="5" Padding="10" Margin="0,0,0,20" BorderBrush="#550000" BorderThickness="1">
                                        <StackPanel>
                                            <TextBlock Text="⛔ ZONA DE CASTIGO (BANEO)" Foreground="#FF4444" FontWeight="Bold" Margin="0,0,0,10"/>

                                            <TextBlock Text="Duración del Baneo" Foreground="#AAA" FontSize="11"/>
                                            <ComboBox x:Name="cmbDuracionBaneo" SelectedIndex="0" SelectionChanged="CmbDuracionBaneo_SelectionChanged">
                                                <ComboBoxItem Content="Sin cambios / No banear"/>
                                                <ComboBoxItem Content="1 Hora"/>
                                                <ComboBoxItem Content="24 Horas"/>
                                                <ComboBoxItem Content="1 Semana"/>
                                                <ComboBoxItem Content="Indefinido (Hasta 2099)"/>
                                            </ComboBox>

                                            <TextBlock Text="Motivo del Castigo" Foreground="#AAA" FontSize="11"/>
                                            <TextBox x:Name="txtMotivo" ToolTip="Escribe aquí el motivo del baneo (Ej: Insultos)"/>
                                        </StackPanel>
                                    </Border>

                                    <Button x:Name="btnGuardar" Content="💾 GUARDAR / ACTUALIZAR" Height="40" Background="#0074E0" Foreground="White" FontWeight="Bold" Margin="0,0,0,10" BorderThickness="0" Click="BtnGuardar_Click"/>

                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="10"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Button Grid.Column="0" x:Name="btnLimpiar" Content="🧹 LIMPIAR" Height="35" Background="#333" Foreground="White" BorderThickness="0" Click="BtnLimpiar_Click"/>
                                        <Button Grid.Column="2" x:Name="btnEliminar" Content="🗑️ ELIMINAR" Height="35" Background="#FF4444" Foreground="White" BorderThickness="0" Click="BtnEliminar_Click"/>
                                    </Grid>
                                </StackPanel>
                            </ScrollViewer>
                        </Border>
                    </Grid>
                </TabItem>

                <TabItem Header="📋 LOGS DE AUDITORÍA">
                    <Grid Margin="0,10,0,0">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <Border Grid.Row="0" Background="#202020" Padding="10" CornerRadius="5" Margin="0,0,0,10">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="EXPORTAR DATOS:" Foreground="#AAA" VerticalAlignment="Center" Margin="0,0,20,0" FontWeight="Bold"/>

                                <Button x:Name="btnExportPDF" Click="BtnExportPDF_Click" Margin="0,0,10,0" Width="140" Height="30" Background="#E74C3C" Foreground="White" BorderThickness="0" Cursor="Hand">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="📄 PDF" FontWeight="Bold" Margin="0,0,10,0"/>
                                        <TextBlock Text="Generar Informe"/>
                                    </StackPanel>
                                </Button>

                                <Button x:Name="btnExportExcel" Click="BtnExportExcel_Click" Width="140" Height="30" Background="#27AE60" Foreground="White" BorderThickness="0" Cursor="Hand">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="📊 EXCEL" FontWeight="Bold" Margin="0,0,10,0"/>
                                        <TextBlock Text="Descargar .CSV"/>
                                    </StackPanel>
                                </Button>

                                <Button x:Name="btnRefrescarLogs" Content="🔄" Width="40" Height="30" Margin="20,0,0,0" Background="#333" Foreground="White" Click="BtnRefrescarLogs_Click"/>
                            </StackPanel>
                        </Border>

                        <DataGrid Grid.Row="1" x:Name="dgAuditoria">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
                                <DataGridTextColumn Header="FECHA" Binding="{Binding Fecha}" Width="150"/>
                                <DataGridTextColumn Header="RESPONSABLE" Binding="{Binding UsuarioResponsable}" Width="150"/>
                                <DataGridTextColumn Header="ACCIÓN" Binding="{Binding Accion}" Width="150"/>
                                <DataGridTextColumn Header="DETALLES" Binding="{Binding Detalles}" Width="*"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </Grid>
                </TabItem>

                <TabItem>
                    <TabItem.Header>
                        <Grid>
                            <TextBlock Text="⚖️ APELACIONES" VerticalAlignment="Center" Margin="0,0,10,0"/>
                            <Border x:Name="badgeNotificacion" Background="#FF4444" CornerRadius="10" Width="20" Height="20" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="20,-5,-10,0" Visibility="Collapsed">
                                <TextBlock x:Name="txtNumApelaciones" Text="0" Foreground="White" FontSize="10" FontWeight="Bold" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                        </Grid>
                    </TabItem.Header>

                    <Grid Margin="0,10,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <DataGrid x:Name="dgApelaciones" Grid.Column="0" Margin="0,0,10,0" SelectionChanged="DgApelaciones_SelectionChanged">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="USUARIO" Binding="{Binding NombreUsuario}" Width="150"/>
                                <DataGridTextColumn Header="FECHA" Binding="{Binding Fecha}" Width="150"/>
                                <DataGridTextColumn Header="ESTADO" Binding="{Binding Estado}" Width="100"/>
                            </DataGrid.Columns>
                        </DataGrid>

                        <Border Grid.Column="1" Background="#181818" CornerRadius="8" Padding="20">
                            <StackPanel>
                                <TextBlock Text="REVISIÓN DE CASO" Foreground="#00C3FF" FontWeight="Bold" Margin="0,0,0,20" FontSize="16"/>

                                <TextBlock Text="Mensaje del Usuario:" Foreground="#AAA" FontWeight="Bold" Margin="0,0,0,5"/>
                                <Border Background="#222" Padding="10" CornerRadius="5" Margin="0,0,0,20">
                                    <TextBlock x:Name="txtMensajeApelacion" Text="Selecciona una apelación..." Foreground="White" TextWrapping="Wrap"/>
                                </Border>

                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                    <Button x:Name="btnAceptarApelacion" Content="✅ ACEPTAR (DESBANEAR)" Width="180" Height="40" Background="#27AE60" Foreground="White" FontWeight="Bold" Margin="0,0,10,0" BorderThickness="0" Click="BtnAceptarApelacion_Click" IsEnabled="False"/>
                                    <Button x:Name="btnRechazarApelacion" Content="❌ RECHAZAR (MANTENER)" Width="180" Height="40" Background="#E74C3C" Foreground="White" FontWeight="Bold" BorderThickness="0" Click="BtnRechazarApelacion_Click" IsEnabled="False"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </Grid>
                </TabItem>
            </TabControl>
        </Grid>
    </Border>
</Window>